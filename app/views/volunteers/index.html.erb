<h2><%= @volunteer_role.name %> Volunteers</h2>

<p>Welcome to your volunteers! These people have requested to volunteer for your role.</p>

<p>Please contact them as soon as possible, and then mark them as 'contacted' so that we know that you have. We may pester you otherwise!</p>

<p>If you have confirmed that they will be volunteering with you, then mark them as confirmed. Otherwise you can remove them from this list.</p>

<p>Feel free to contact your volunteers however you want. Email, whatsapp, facebook, post. You can <%= link_to 'download a CSV', event_volunteer_role_volunteers_path(@event, @volunteer_role, format: :csv) %> of this list if that's helpful.</p>

<p>If you have any questions, reach out to the Volunteers Team via <a href="mailto:volunteers@londondecom.org">volunteers@londondecom.org</a>.</p>

<table class="table">
  <tr>
    <th class="d-table-cell d-lg-none"></th>
    <th>Name</th>
    <th class="d-none d-lg-table-cell">Email</th>
    <th class="d-none d-lg-table-cell">Phone</th>
    <th class="d-none d-lg-table-cell">Comments</th>
    <th>State</th>
    <th>Next State</th>
    <th></th>
  </tr>
  <% @volunteers.each do |volunteer| %>
    <% cache volunteer do %>
      <tr class="accordion-toggle <%= volunteer.state %> low-income-request">
        <td class="d-table-cell d-lg-none align-middle" data-bs-toggle="collapse" data-bs-target="#volunteer-<%= volunteer.id %>">
          <span class="caret"></span>
        </td>
        <td class="align-middle"><%= volunteer.user.name %></td>
        <td class="d-none d-lg-table-cell align-middle"><%= volunteer.user.email %></td>
        <td class="d-none d-lg-table-cell align-middle"><%= volunteer.phone %></td>
        <td class="d-none d-lg-table-cell align-middle"><%= volunteer.additional_comments %></td>
        <td class="align-middle">
          <%= volunteer.state %>
        </td>
        <td class="align-middle">
          <% if volunteer.next_state %>
            <%= form_for [@event, @volunteer_role, volunteer] do |form| %>
              <%= form.hidden_field :state, value: volunteer.next_state %>
              <%= form.submit "Mark as #{volunteer.next_state}", class: "btn btn-primary w-100"  %>
            <% end %>
          <% end %>
        </td>
        <td class="align-middle">
          <%= form_for [@event, @volunteer_role, volunteer], method: :delete do |form| %>
            <%= form.submit "Remove", data: {confirm: 'Are you sure?'}, class: "btn btn-danger w-100"  %>
          <% end %>
        </td>
      </tr>
      <tr class="d-table-row d-lg-none">
        <td colspan="12" style="padding: 0 !important">
          <div class="accordian-body collapse" id="volunteer-<%= volunteer.id %>">
            <p class="mt-2">Email: <%= volunteer.user.email %></p>
            <p>Phone: <%= volunteer.phone %></p>
            <p>Additional Comments: <%= volunteer.additional_comments %></p>
          </div>
        </td>
      </tr>
    <% end %>
  <% end %>
</table>
